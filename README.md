# Shanghai Weather Data Visualization

A Python project for fetching and displaying Shanghai weather data, including data scraping and visualization features.

## Project Structure

```
Weather_Shanghai_Data_Visualization/
├── weather_display.py      # Main program - Weather data visualization interface
├── scraping_utils.py       # Data scraping tool - Fetch weather data
├── weather.csv            # Weather data file (generated by scraper)
├── requirements.txt       # Project dependencies
└── README.md             # Project documentation
```

## Installation

Before running the project, make sure to install the required Python packages:

```bash
pip install -r requirements.txt
```

Or install manually:

```bash
pip install pandas requests lxml tkinter
```

## Usage

### 1. Data Collection

First, run the data scraping script to fetch weather data:

```bash
python scraping_utils.py
```

This script will:
- Automatically scrape Shanghai weather data for January-December 2024
- Save the data to `weather.csv` file
- Include date, high temperature, low temperature, and weather conditions

### 2. Launch Visualization Interface

After data collection is complete, run the main program:

```bash
python weather_display.py
```

## File Description

### `weather_display.py` - Main Program File
**Function**: Weather data visualization interface
- Creates a Tkinter-based graphical user interface
- Displays date, temperature range, and weather conditions
- Provides weather icons and English translations
- Supports manual date switching and auto-rotation features
- Interface includes:
  - Date and temperature display area
  - Weather icon and description
  - Control buttons (previous day/next day)
  - Auto-update toggle

**Main Classes and Methods**:
- `WeatherDisplay`: Main interface class
- `load_weather_data()`: Load CSV weather data
- `create_widgets()`: Create interface components
- `update_display()`: Update display content
- `get_weather_icon()`: Return corresponding icon based on weather
- `translate_weather_to_english()`: Translate weather descriptions from Chinese to English

### `scraping_utils.py` - Data Scraping Tool
**Function**: Scrape Shanghai weather data from weather websites
- Uses requests and lxml libraries for web scraping
- Fetches full-year 2024 data from historical weather websites
- Parses HTML pages to extract weather information
- Saves data in CSV format

**Main Functions**:
- `getWeather(url)`: Scrape weather data for specified month
- Automatically iterates through months 1-12 to get full year data
- Data includes: date, high temperature, low temperature, weather conditions
- Outputs formatted CSV file

### `weather.csv` - Weather Data File
**Format**: CSV format weather data
**Fields**:
- `date`: Date
- `high`: High temperature (Celsius)
- `low`: Low temperature (Celsius)
- `weather`: Weather condition description

### `requirements.txt` - Project Dependencies
Lists Python packages and their version requirements needed to run the project.

## Interface Operation Guide

### Control Buttons
- **Former Day**: View previous day's weather
- **Next Day**: View next day's weather
- **Auto Update**: Enable/disable auto-rotation (switches every 3 seconds)

### Display Content
- **Date**: Shows the currently viewed date
- **Temperature**: Displays the day's high and low temperatures
- **Weather Icon**: Shows corresponding emoji icon based on weather conditions
- **Weather Description**: Displays English description of weather conditions

## Technical Features

- **Multi-encoding Support**: Automatically handles CSV file encoding issues (UTF-8/GBK/GB2312)
- **Thread Safety**: Uses multi-threading for auto-update functionality
- **Error Handling**: Comprehensive exception handling mechanism
- **User-friendly**: Intuitive graphical interface and operation prompts

## Notes

1. First run requires executing `scraping_utils.py` to fetch data
2. Ensure stable network connection for weather data scraping
3. Scraping process may take some time, please be patient
4. If encoding issues occur, the program will automatically try multiple encoding formats

## System Requirements

- Python 3.6+
- Windows/Linux/macOS
- Network connection (for data scraping)

## License

This project is for learning and research purposes only.
